<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 440" font-family="system-ui, -apple-system, sans-serif">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#555"/>
    </marker>
    <marker id="arrowRed" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#E74C3C"/>
    </marker>
    <marker id="arrowGreen" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#27AE60"/>
    </marker>
    <marker id="arrowPurple" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#8E44AD"/>
    </marker>
  </defs>

  <rect width="800" height="440" fill="#fafafa" rx="12"/>

  <text x="400" y="35" text-anchor="middle" font-size="18" font-weight="bold" fill="#222">The Agent Process</text>
  <text x="400" y="55" text-anchor="middle" font-size="12" fill="#888">A recommended structure for agent work</text>

  <!-- 1. User Input -->
  <rect x="30" y="110" width="110" height="60" rx="8" fill="#E8D5F5" stroke="#9B59B6" stroke-width="2"/>
  <text x="85" y="136" text-anchor="middle" font-size="13" font-weight="bold" fill="#6C3483">User Input</text>
  <text x="85" y="152" text-anchor="middle" font-size="10" fill="#6C3483">spec, prompt, brief</text>

  <!-- Arrow: User → Orchestrator -->
  <line x1="140" y1="140" x2="172" y2="140" stroke="#555" stroke-width="1.5" marker-end="url(#arrowhead)"/>

  <!-- 2. Orchestrator -->
  <rect x="177" y="110" width="110" height="60" rx="8" fill="#D5F5E3" stroke="#27AE60" stroke-width="2"/>
  <text x="232" y="136" text-anchor="middle" font-size="13" font-weight="bold" fill="#1E8449">Orchestrator</text>
  <text x="232" y="152" text-anchor="middle" font-size="10" fill="#1E8449">command / manager</text>

  <!-- Arrow: Orchestrator → Explorer -->
  <line x1="287" y1="140" x2="319" y2="140" stroke="#555" stroke-width="1.5" marker-end="url(#arrowhead)"/>

  <!-- 3. Explorer -->
  <rect x="324" y="110" width="110" height="60" rx="8" fill="#D6EAF8" stroke="#2E86C1" stroke-width="2"/>
  <text x="379" y="136" text-anchor="middle" font-size="13" font-weight="bold" fill="#21618C">Explorer</text>
  <text x="379" y="152" text-anchor="middle" font-size="10" fill="#21618C">research, context</text>

  <!-- Arrow: Explorer → Actor -->
  <line x1="434" y1="140" x2="466" y2="140" stroke="#555" stroke-width="1.5" marker-end="url(#arrowhead)"/>

  <!-- 4. Actor -->
  <rect x="471" y="110" width="110" height="60" rx="8" fill="#FDEBD0" stroke="#E67E22" stroke-width="2"/>
  <text x="526" y="136" text-anchor="middle" font-size="13" font-weight="bold" fill="#A04000">Actor</text>
  <text x="526" y="152" text-anchor="middle" font-size="10" fill="#A04000">build, write, do</text>

  <!-- Arrow: Actor → Reviewer -->
  <line x1="581" y1="140" x2="613" y2="140" stroke="#555" stroke-width="1.5" marker-end="url(#arrowhead)"/>

  <!-- 5. Reviewer -->
  <rect x="618" y="110" width="110" height="60" rx="8" fill="#F9E79F" stroke="#F1C40F" stroke-width="2"/>
  <text x="673" y="136" text-anchor="middle" font-size="13" font-weight="bold" fill="#7D6608">Reviewer</text>
  <text x="673" y="152" text-anchor="middle" font-size="10" fill="#7D6608">check, approve</text>

  <!-- Iteration loop: Reviewer back to Actor (below boxes, with clearance) -->
  <path d="M 650 170 L 650 210 C 650 230, 545 230, 545 210 L 545 173" fill="none" stroke="#E74C3C" stroke-width="2" stroke-dasharray="6,3" marker-end="url(#arrowRed)"/>
  <text x="597" y="228" text-anchor="middle" font-size="11" font-weight="600" fill="#E74C3C">Iterate</text>

  <!-- Done arrow: from right side of Reviewer, going down -->
  <path d="M 700 170 L 700 290" fill="none" stroke="#27AE60" stroke-width="1.5" marker-end="url(#arrowGreen)"/>
  <text x="715" y="240" font-size="10" fill="#27AE60" font-weight="600">Done</text>

  <!-- 6. Post-Mortem -->
  <rect x="530" y="295" width="130" height="55" rx="8" fill="#FADBD8" stroke="#E74C3C" stroke-width="1.5"/>
  <text x="595" y="318" text-anchor="middle" font-size="12" font-weight="600" fill="#922B21">Post-Mortem</text>
  <text x="595" y="334" text-anchor="middle" font-size="10" fill="#922B21">what worked, what didn't</text>

  <!-- Arrow: Done → Post-Mortem -->
  <line x1="700" y1="322" x2="663" y2="322" stroke="#555" stroke-width="1.5" marker-end="url(#arrowhead)"/>

  <!-- 7. Change Process -->
  <rect x="350" y="295" width="140" height="55" rx="8" fill="#F5EEF8" stroke="#8E44AD" stroke-width="1.5"/>
  <text x="420" y="318" text-anchor="middle" font-size="12" font-weight="600" fill="#6C3483">Change Process</text>
  <text x="420" y="334" text-anchor="middle" font-size="10" fill="#6C3483">update rules, commands</text>

  <!-- Arrow: Post-Mortem → Change Process -->
  <line x1="530" y1="322" x2="493" y2="322" stroke="#555" stroke-width="1.5" marker-end="url(#arrowhead)"/>

  <!-- Arrow: Change Process loops back up to Orchestrator -->
  <path d="M 350 322 L 232 322 L 232 173" fill="none" stroke="#8E44AD" stroke-width="1.5" stroke-dasharray="6,3" marker-end="url(#arrowPurple)"/>
  <text x="275" y="275" text-anchor="middle" font-size="10" fill="#8E44AD">next run</text>
  <text x="275" y="288" text-anchor="middle" font-size="10" fill="#8E44AD">is better</text>

  <!-- Bottom label -->
  <text x="400" y="420" text-anchor="middle" font-size="11" fill="#999" font-style="italic">Iterate until the reviewer approves. Learnings feed back into the process.</text>
</svg>
